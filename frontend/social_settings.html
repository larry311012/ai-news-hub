<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Settings - AI News Hub</title>
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .animate-slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
    <link rel="stylesheet" href="/src/style.css">
</head>
<body class="bg-gray-50">
    <div id="social-app">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <a href="index.html" class="text-2xl font-bold text-indigo-600">AI News Hub</a>
                        <span class="ml-4 text-sm text-gray-500">/ Social Media Settings</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="index.html" class="text-sm text-gray-600 hover:text-gray-900">
                            <svg class="w-5 h-5 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                            </svg>
                            Back to App
                        </a>
                        <a href="profile.html" class="text-sm text-gray-600 hover:text-gray-900">Profile</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Loading State -->
            <div v-if="loading" class="flex items-center justify-center py-20">
                <div class="text-center">
                    <svg class="animate-spin h-12 w-12 text-indigo-600 mx-auto" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-600">Loading social connections...</p>
                </div>
            </div>

            <!-- Error State -->
            <div v-if="globalError" class="mb-6 bg-red-50 border border-red-200 rounded-lg p-4">
                <div class="flex">
                    <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                    </svg>
                    <div class="ml-3">
                        <p class="text-sm text-red-800">{{ globalError }}</p>
                    </div>
                </div>
            </div>

            <div v-if="!loading">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900">Social Media Connections</h1>
                    <p class="mt-2 text-sm text-gray-600">
                        Connect your social media accounts to publish generated posts directly from AI News Hub.
                    </p>
                </div>

                <!-- Connection Status Overview -->
                <div class="mb-8 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Connected Platforms</p>
                                <p class="text-3xl font-bold text-indigo-600 mt-2">{{ connectedCount }}</p>
                            </div>
                            <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Platforms</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">3</p>
                            </div>
                            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Last Activity</p>
                                <p class="text-sm font-semibold text-gray-900 mt-2">{{ lastActivityText }}</p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Platform Connection Cards -->
                <div class="space-y-6">
                    <!-- LinkedIn Card -->
                    <div class="bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md"
                         :class="connections.linkedin.connected ? 'border-blue-200' : 'border-gray-200'">
                        <div class="p-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                                <!-- Platform Info -->
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="flex-shrink-0">
                                        <div class="w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <h3 class="text-xl font-bold text-gray-900">LinkedIn</h3>
                                            <span v-if="connections.linkedin.connected"
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                                </svg>
                                                Connected
                                            </span>
                                            <span v-else
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                Not Connected
                                            </span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-3">
                                            Share professional insights and industry news with your LinkedIn network.
                                        </p>

                                        <!-- Connected State -->
                                        <div v-if="connections.linkedin.connected" class="space-y-2">
                                            <div class="flex items-center text-sm">
                                                <svg class="w-4 h-4 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                                <span class="text-gray-700 font-medium">{{ connections.linkedin.account_name || 'Connected Account' }}</span>
                                            </div>
                                            <div v-if="connections.linkedin.last_used" class="flex items-center text-sm text-gray-500">
                                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                                Last used: {{ formatDate(connections.linkedin.last_used) }}
                                            </div>
                                            <div v-if="connections.linkedin.expires_at" class="flex items-center text-sm">
                                                <svg class="w-4 h-4 mr-2" :class="isTokenExpiringSoon('linkedin') ? 'text-yellow-500' : 'text-gray-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                                                </svg>
                                                <span :class="isTokenExpiringSoon('linkedin') ? 'text-yellow-700 font-medium' : 'text-gray-500'">
                                                    Token expires: {{ formatDate(connections.linkedin.expires_at) }}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Error State -->
                                        <div v-if="connections.linkedin.error" class="mt-2 p-3 bg-red-50 border border-red-200 rounded-md">
                                            <p class="text-sm text-red-800">{{ connections.linkedin.error }}</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="mt-4 md:mt-0 md:ml-6 flex flex-col space-y-2">
                                    <button v-if="!connections.linkedin.connected"
                                            @click="connectPlatform('linkedin')"
                                            :disabled="loading.linkedin"
                                            class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
                                        <svg v-if="loading.linkedin" class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        {{ loading.linkedin ? 'Connecting...' : 'Connect LinkedIn' }}
                                    </button>
                                    <div v-else class="flex space-x-2">
                                        <button @click="testConnection('linkedin')"
                                                :disabled="loading.linkedin"
                                                class="px-4 py-2 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 font-medium transition-colors disabled:opacity-50">
                                            Test
                                        </button>
                                        <button @click="refreshConnection('linkedin')"
                                                :disabled="loading.linkedin"
                                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 font-medium transition-colors disabled:opacity-50">
                                            Refresh
                                        </button>
                                        <button @click="disconnectPlatform('linkedin')"
                                                :disabled="loading.linkedin"
                                                class="px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50 font-medium transition-colors disabled:opacity-50">
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Twitter Card -->
                    <div class="bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md"
                         :class="connections.twitter.connected ? 'border-sky-200' : 'border-gray-200'">
                        <div class="p-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                                <!-- Platform Info -->
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="flex-shrink-0">
                                        <div class="w-16 h-16 bg-sky-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-8 h-8 text-sky-500" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <h3 class="text-xl font-bold text-gray-900">Twitter (X)</h3>
                                            <span v-if="connections.twitter.connected"
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                                </svg>
                                                Connected
                                            </span>
                                            <span v-else
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                Not Connected
                                            </span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-3">
                                            Share quick updates and engage with your Twitter audience in real-time.
                                        </p>

                                        <!-- Connected State -->
                                        <div v-if="connections.twitter.connected" class="space-y-2">
                                            <div class="flex items-center text-sm">
                                                <svg class="w-4 h-4 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                                <span class="text-gray-700 font-medium">{{ connections.twitter.account_name || 'Connected Account' }}</span>
                                            </div>
                                            <div v-if="connections.twitter.last_used" class="flex items-center text-sm text-gray-500">
                                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                                Last used: {{ formatDate(connections.twitter.last_used) }}
                                            </div>
                                            <div v-if="connections.twitter.expires_at" class="flex items-center text-sm">
                                                <svg class="w-4 h-4 mr-2" :class="isTokenExpiringSoon('twitter') ? 'text-yellow-500' : 'text-gray-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                                                </svg>
                                                <span :class="isTokenExpiringSoon('twitter') ? 'text-yellow-700 font-medium' : 'text-gray-500'">
                                                    Token expires: {{ formatDate(connections.twitter.expires_at) }}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Error State -->
                                        <div v-if="connections.twitter.error" class="mt-2 p-3 bg-red-50 border border-red-200 rounded-md">
                                            <p class="text-sm text-red-800">{{ connections.twitter.error }}</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="mt-4 md:mt-0 md:ml-6 flex flex-col space-y-2">
                                    <button v-if="!connections.twitter.connected"
                                            @click="connectPlatform('twitter')"
                                            :disabled="loading.twitter"
                                            class="px-6 py-2 bg-sky-500 text-white rounded-md hover:bg-sky-600 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
                                        <svg v-if="loading.twitter" class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        {{ loading.twitter ? 'Connecting...' : 'Connect Twitter' }}
                                    </button>
                                    <div v-else class="flex space-x-2">
                                        <button @click="testConnection('twitter')"
                                                :disabled="loading.twitter"
                                                class="px-4 py-2 border border-sky-500 text-sky-500 rounded-md hover:bg-sky-50 font-medium transition-colors disabled:opacity-50">
                                            Test
                                        </button>
                                        <button @click="refreshConnection('twitter')"
                                                :disabled="loading.twitter"
                                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 font-medium transition-colors disabled:opacity-50">
                                            Refresh
                                        </button>
                                        <button @click="disconnectPlatform('twitter')"
                                                :disabled="loading.twitter"
                                                class="px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50 font-medium transition-colors disabled:opacity-50">
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Threads Card -->
                    <div class="bg-white rounded-lg shadow-sm border-2 transition-all hover:shadow-md"
                         :class="connections.threads.connected ? 'border-purple-200' : 'border-gray-200'">
                        <div class="p-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                                <!-- Platform Info -->
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="flex-shrink-0">
                                        <div class="w-16 h-16 bg-purple-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.781 3.631 2.695 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 013.02.142l-.126 1.974a11.881 11.881 0 00-2.58-.123c-1.018.056-1.84.344-2.446.855-.583.493-.87 1.12-.834 1.814.036.683.388 1.217.99 1.502.539.255 1.277.354 2.101.28 1.15-.093 2.059-.535 2.702-1.315.646-.784.972-1.858.972-3.197V8.033c0-.458-.006-.916-.02-1.373l2.04-.057c.013.457.02.915.02 1.373v1.78c.598-.421 1.3-.758 2.092-.998 1.004-.304 2.085-.457 3.212-.457l.126 1.99c-.905 0-1.766.123-2.562.366-.796.243-1.47.6-2.004 1.062v1.304c.54.694.97 1.49 1.28 2.369.726 2.057.746 4.753-1.44 6.993-1.817 1.869-4.138 2.82-7.106 2.848z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-2">
                                            <h3 class="text-xl font-bold text-gray-900">Threads</h3>
                                            <span v-if="connections.threads.connected"
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                                </svg>
                                                Connected
                                            </span>
                                            <span v-else
                                                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                Not Connected
                                            </span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-3">
                                            Share text-based conversations and build connections on Meta's Threads platform.
                                        </p>

                                        <!-- Connected State -->
                                        <div v-if="connections.threads.connected" class="space-y-2">
                                            <div class="flex items-center text-sm">
                                                <svg class="w-4 h-4 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                                </svg>
                                                <span class="text-gray-700 font-medium">{{ connections.threads.account_name || 'Connected Account' }}</span>
                                            </div>
                                            <div v-if="connections.threads.last_used" class="flex items-center text-sm text-gray-500">
                                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                </svg>
                                                Last used: {{ formatDate(connections.threads.last_used) }}
                                            </div>
                                            <div v-if="connections.threads.expires_at" class="flex items-center text-sm">
                                                <svg class="w-4 h-4 mr-2" :class="isTokenExpiringSoon('threads') ? 'text-yellow-500' : 'text-gray-400'" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                                                </svg>
                                                <span :class="isTokenExpiringSoon('threads') ? 'text-yellow-700 font-medium' : 'text-gray-500'">
                                                    Token expires: {{ formatDate(connections.threads.expires_at) }}
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Error State -->
                                        <div v-if="connections.threads.error" class="mt-2 p-3 bg-red-50 border border-red-200 rounded-md">
                                            <p class="text-sm text-red-800">{{ connections.threads.error }}</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="mt-4 md:mt-0 md:ml-6 flex flex-col space-y-2">
                                    <button v-if="!connections.threads.connected"
                                            @click="connectPlatform('threads')"
                                            :disabled="loading.threads"
                                            class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
                                        <svg v-if="loading.threads" class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        {{ loading.threads ? 'Connecting...' : 'Connect Threads' }}
                                    </button>
                                    <div v-else class="flex space-x-2">
                                        <button @click="testConnection('threads')"
                                                :disabled="loading.threads"
                                                class="px-4 py-2 border border-purple-600 text-purple-600 rounded-md hover:bg-purple-50 font-medium transition-colors disabled:opacity-50">
                                            Test
                                        </button>
                                        <button @click="refreshConnection('threads')"
                                                :disabled="loading.threads"
                                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 font-medium transition-colors disabled:opacity-50">
                                            Refresh
                                        </button>
                                        <button @click="disconnectPlatform('threads')"
                                                :disabled="loading.threads"
                                                class="px-4 py-2 border border-red-300 text-red-700 rounded-md hover:bg-red-50 font-medium transition-colors disabled:opacity-50">
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Help Section -->
                <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
                    <div class="flex items-start">
                        <svg class="w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div>
                            <h3 class="text-lg font-semibold text-blue-900 mb-2">Need Help?</h3>
                            <ul class="text-sm text-blue-800 space-y-2">
                                <li>Click "Connect" to authorize AI News Hub to post on your behalf</li>
                                <li>You'll be redirected to the platform's authorization page</li>
                                <li>Grant the necessary permissions and you'll be redirected back</li>
                                <li>Once connected, you can publish posts directly from the Content Editor</li>
                                <li>Use "Test" to verify your connection is working</li>
                                <li>Use "Refresh" if your token is expiring soon</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Success Toast -->
        <div v-if="showToast"
             class="fixed top-4 right-4 z-50 max-w-sm px-6 py-4 rounded-lg shadow-lg transition-all animate-slide-in"
             :class="toastType === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'">
            <div class="flex items-center space-x-2">
                <span class="text-xl font-bold">{{ toastType === 'success' ? '✓' : '✕' }}</span>
                <span class="font-medium">{{ toastMessage }}</span>
            </div>
        </div>
    </div>

    <script type="module" src="utils.js"></script>
    <script type="module" src="social.js"></script>
</body>
</html>
